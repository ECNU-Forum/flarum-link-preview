(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const n=flarum.core.compat["forum/app"];var a=e.n(n);const r=flarum.core.compat["common/extend"],o=flarum.core.compat["forum/components/CommentPost"];var i=e.n(o);a().initializers.add("datlechin/flarum-link-preview",(function(){(0,r.extend)(i().prototype,"oncreate",(function(){for(var e=this.element.querySelectorAll(".Post-body a[href]"),t=function(t){var n=e[t],a=n.getAttribute("href"),r=document.createElement("div");r.classList.add("LinkPreview"),n.parentNode.insertBefore(r,n),r.appendChild(n),n.remove();var o=document.createElement("div");o.classList.add("LinkPreview-image"),r.appendChild(o);var i=document.createElement("img");o.appendChild(i);var d=document.createElement("div");d.classList.add("LinkPreview-main"),r.appendChild(d);var l=document.createElement("div");l.classList.add("LinkPreview-title"),d.appendChild(l);var c=document.createElement("a");c.target="_blank",l.appendChild(c);var m=document.createElement("div");m.classList.add("LinkPreview-description"),d.appendChild(m);var s=document.createElement("div");s.classList.add("LinkPreview-domain"),d.appendChild(s);var p=document.createElement("a");p.href=a,p.target="_blank";var u=a.split("/")[2].replace("www.","");p.textContent=u,s.appendChild(p);var v=document.createElement("i");v.classList.add("fa","fa-spinner","fa-spin"),o.appendChild(v),fetch("https://meta-grabber.herokuapp.com?url="+a,{method:"GET",mode:"cors",credentials:"omit"}).then((function(e){return v.remove(),e.json()})).then((function(e){i.src=e.image?e.image:"https://www.google.com/s2/favicons?sz=64&domain_url="+u,e.url&&(c.href=e.url),e.title&&(c.textContent=e.title),e.description&&(m.textContent=e.description),e.domain&&(p.textContent=e.domain)}))},n=0;n<e.length;n++)t(n)}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map